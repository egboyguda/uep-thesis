<% layout('layouts/sidebar')%> 

<div class="row justify-content-md-center">
   <div class="col-6 offset-3">
        <p class="text-center" id="p"></p>
        <div  id="reader">
        </div>

   </div> 
 
     
</div>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="/js/html5-qrcode.min.js"></script>

<script>
async function onScanSuccess(qrCodeMessage) {
  // handle on success condition with the decoded message
  //onScanSuccess = await noop;
  html5QrcodeScanner.clear();
  sendData(qrCodeMessage)
 

 
}
function sendData(data){
  axios.post('/barangay/qrscan/<%=id%>',{
    person:data
  }).then((res)=>{
    alert('successfully scan')
    console.log(res.data)
  })
}
var html5QrcodeScanner = new Html5QrcodeScanner('reader', {
  fps: 10,
  qrbox: 200,
});

html5QrcodeScanner.render(onScanSuccess);
</script>
    
